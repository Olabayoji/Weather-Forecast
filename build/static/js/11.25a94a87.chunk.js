(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[11],{163:function(e,t,a){"use strict";a.r(t),a.d(t,"AuthPage",(function(){return _}));var n=a(0),r=a(160),c=a(151),s=a(5),i=a(131),o=a(86),l=Object(i.a)({apiKey:"AIzaSyCJJ7gB1xWDjeSmyj12tkqkgOjlwz2vCLc",authDomain:"weather-app-cdd44.firebaseapp.com",projectId:"weather-app-cdd44",storageBucket:"weather-app-cdd44.appspot.com",messagingSenderId:"201503788111",appId:"1:201503788111:web:c26288c310fa63abf96e3a",measurementId:"G-TTJX8CTF5F"}),d=Object(o.b)(l),j=a(58),u=a.n(j),h=a(52),b=a(18),m=a(101),p=a(1),O=a(12),x=a(8),g=a(19),v=a(2),f=function(){var e,t=Object(p.g)(),a=Object(x.b)(),r=Object(h.a)((function(e){return!!e.match(/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/)})),c=r.value,i=r.isValid,l=r.valueChangeHandler,j=r.inputBlurHandler,f=r.hasError,w=Object(h.a)((function(e){return e.trim().length>7})),S=w.value,_=w.isValid,k=w.valueChangeHandler,N=w.inputBlurHandler,y=w.hasError,I=w.reset,A=Object(n.useState)(!1),F=Object(s.a)(A,2),C=F[0],T=F[1],D=Object(n.useState)(null),B=Object(s.a)(D,2),E=B[0],J=B[1];"EMAIL_NOT_FOUND"===E?e=Object(v.jsx)("p",{className:u.a["error-text"],children:"Email is not registered"}):"INVALID_PASSWORD"===E?e=Object(v.jsx)("p",{className:u.a["error-text"],children:"Invalid password"}):""!==E&&(e=Object(v.jsx)("p",{className:u.a["error-text"],children:E}));var H=!1;_&&i&&(H=!0);var W=f?"".concat(u.a.control," ").concat(u.a.invalid," "):u.a.control,L=y?"".concat(u.a.control," ").concat(u.a.invalid," "):u.a.control;return Object(v.jsxs)("div",{className:u.a.element,children:[Object(v.jsx)("h1",{children:"Welcome Back"}),Object(v.jsx)("button",{onClick:function(){var e=new o.a;Object(o.c)(d,e).then((function(e){var n=new Date((new Date).getTime()+1e3*+e._tokenResponse.expiresIn);a(g.a.logIn({token:e._tokenResponse.idToken,expire:n.toISOString()})),t("/")})).catch((function(e){J(e.message)}))},className:"btn",children:Object(v.jsxs)("div",{className:u.a.flex,children:[Object(v.jsx)(m.a,{}),"Log in with Google"]})}),Object(v.jsx)("div",{className:"separator",children:"or"}),Object(v.jsxs)("form",{onSubmit:function(e){e.preventDefault(),T(!0),fetch("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyCJJ7gB1xWDjeSmyj12tkqkgOjlwz2vCLc",{method:"POST",body:JSON.stringify({email:c,password:S,returnSecureToken:!0}),headers:{"Content-Type":"application/json"}}).then((function(e){return T(!1),e.ok?e.json():e.json().then((function(e){var t="Authentication Failed";throw e&&e.error&&e.error.message&&(t=e.error.message),new Error(t)}))})).then((function(e){var n=new Date((new Date).getTime()+1e3*+e.expiresIn);a(g.a.logIn({token:e.idToken,expire:n.toISOString()})),t("/")})).catch((function(e){J(e.message),I()}))},children:[Object(v.jsxs)("div",{className:W,children:[Object(v.jsx)("label",{htmlFor:"email",children:"Email"}),Object(v.jsx)("input",{value:c,onChange:l,onBlur:j,type:"email",id:"email",required:!0}),f&&Object(v.jsx)("p",{className:u.a["error-text"],children:"Kindly enter a valid email"})]}),Object(v.jsxs)("div",{className:L,children:[Object(v.jsx)("label",{htmlFor:"password",children:"Password"}),Object(v.jsx)("input",{value:S,onChange:k,onBlur:N,type:"password",id:"password",required:!0}),Object(v.jsx)(O.b,{to:"/reset-password",children:"Forgot password?"}),y&&Object(v.jsx)("p",{style:{bottom:"2em",position:"relative"},className:u.a["error-text"],children:"Kindly enter a valid password"})]}),Object(v.jsxs)("div",{className:u.a.actions,children:[C?Object(v.jsx)(b.a,{}):Object(v.jsx)("button",{disabled:!H,children:"Login"}),e,Object(v.jsxs)("p",{children:["Do not have an account? ",Object(v.jsx)(O.b,{to:"/signup",children:"Sign up"})]})]})]})]})},w=function(){var e,t=Object(p.g)(),a=Object(x.b)(),r=Object(h.a)((function(e){return!!e.match(/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/)})),c=r.value,i=r.isValid,l=r.valueChangeHandler,j=r.inputBlurHandler,f=r.hasError,w=Object(h.a)((function(e){return e.trim().length>7})),S=w.value,_=w.isValid,k=w.valueChangeHandler,N=w.inputBlurHandler,y=w.hasError,I=w.reset,A=Object(n.useState)(!1),F=Object(s.a)(A,2),C=F[0],T=F[1],D=Object(n.useState)(null),B=Object(s.a)(D,2),E=B[0],J=B[1];"EMAIL_EXISTS"===E?e=Object(v.jsx)("p",{className:u.a["error-text"],children:"Email is already registered"}):null!==E&&(e=Object(v.jsx)("p",{className:u.a["error-text"],children:"Authentication failed"})),Object(n.useEffect)((function(){J(null)}),[c]);var H=!1;_&&i&&(H=!0);var W=f?"".concat(u.a.control," ").concat(u.a.invalid," "):u.a.control,L=y?"".concat(u.a.control," ").concat(u.a.invalid," "):u.a.control;return Object(v.jsxs)("div",{className:u.a.element,children:[Object(v.jsx)("h1",{children:"Get Started"}),Object(v.jsx)("button",{onClick:function(){var e=new o.a;Object(o.c)(d,e).then((function(e){var n=new Date((new Date).getTime()+1e3*+e._tokenResponse.expiresIn);a(g.a.logIn({token:e._tokenResponse.idToken,expire:n.toISOString()})),t("/")})).catch((function(e){J(e.message)}))},className:"btn",children:Object(v.jsxs)("div",{className:u.a.flex,children:[Object(v.jsx)(m.a,{}),"Sign up with Google"]})}),Object(v.jsx)("div",{className:"separator",children:"or"}),Object(v.jsxs)("form",{onSubmit:function(e){e.preventDefault(),T(!0),fetch("https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyCJJ7gB1xWDjeSmyj12tkqkgOjlwz2vCLc",{method:"POST",body:JSON.stringify({email:c,password:S,returnSecureToken:!0}),headers:{"Content-Type":"application/json"}}).then((function(e){return T(!1),e.ok?e.json():e.json().then((function(e){var t="Authentication Failed";throw e&&e.error&&e.error.message&&(t=e.error.message),new Error(t)}))})).then((function(e){var n=new Date((new Date).getTime()+1e3*+e.expiresIn);a(g.a.logIn({token:e.idToken,expire:n.toISOString()})),t("/")})).catch((function(e){T(!1),J(e.message),I()}))},children:[Object(v.jsxs)("div",{className:W,children:[Object(v.jsx)("label",{htmlFor:"email",children:"Email"}),Object(v.jsx)("input",{value:c,onChange:l,onBlur:j,type:"email",id:"email",required:!0}),f&&Object(v.jsx)("p",{className:u.a["error-text"],children:"Kindly enter a valid email"})]}),Object(v.jsxs)("div",{className:L,children:[Object(v.jsx)("label",{htmlFor:"password",children:"Password"}),Object(v.jsx)("input",{value:S,onChange:k,onBlur:N,type:"password",id:"password",required:!0}),y&&Object(v.jsx)("p",{className:u.a["error-text"],children:"Kindly enter a valid password"})]}),Object(v.jsxs)("div",{className:u.a.actions,children:[C?Object(v.jsx)(b.a,{}):Object(v.jsx)("button",{disabled:!H,children:"Sign up"}),e,Object(v.jsxs)("p",{children:["Already have an account? ",Object(v.jsx)(O.b,{to:"/login",children:"Sign in"})]})]})]})]})},S=function(e){var t;return"login"===e.params&&(t=Object(v.jsx)(f,{})),"signup"===e.params&&(t=Object(v.jsx)(w,{})),Object(v.jsxs)("div",{className:u.a.container,children:[Object(v.jsx)(r.a,{bg:"light",expand:"lg",children:Object(v.jsx)(c.a,{children:Object(v.jsx)(O.b,{to:"/",children:Object(v.jsx)(r.a.Brand,{className:"logo",children:"Weatherly"})})})}),t]})},_=function(){var e=Object(p.h)().auth;return Object(v.jsx)(S,{params:e})};t.default=_},52:function(e,t,a){"use strict";var n=a(5),r=a(0);t.a=function(e){var t=Object(r.useState)(""),a=Object(n.a)(t,2),c=a[0],s=a[1],i=Object(r.useState)(!1),o=Object(n.a)(i,2),l=o[0],d=o[1],j=e(c);return{value:c,isValid:j,hasError:!j&&l,valueChangeHandler:function(e){s(e.target.value)},inputBlurHandler:function(e){d(!0)},reset:function(){s(""),d(!1)}}}},58:function(e,t,a){e.exports={container:"AuthForm_container__c83gh",element:"AuthForm_element__7WXs6","reset-form":"AuthForm_reset-form__10kf3",control:"AuthForm_control__2fVSU",invalid:"AuthForm_invalid__2xOpm",actions:"AuthForm_actions__1VNhY",action:"AuthForm_action__1YuFu",toggle:"AuthForm_toggle__21tnB",flex:"AuthForm_flex__2F0aW","error-text":"AuthForm_error-text__3Gs2x"}}}]);
//# sourceMappingURL=11.25a94a87.chunk.js.map